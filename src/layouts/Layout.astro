---
import { SEO } from "astro-seo";

const siteUrl = import.meta.env.SITE_URL || "https://astro-starter.piry.dev";
const appEnv = import.meta.env.APP_ENV || "development";

const allowIndexing = appEnv === "production";
const robotsContent = allowIndexing ? "index, follow" : "noindex, nofollow";

const { title, description = "Astro Starter" } = Astro.props;

const isIndexPage = Astro.url.pathname === "/";

const DEFAULT_TITLE = "Astro Starter";

const pageTitle = isIndexPage ? DEFAULT_TITLE : title || DEFAULT_TITLE;
const titleTemplate = isIndexPage ? "%s" : "%s | Astro Starter";
---

<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <SEO
      title={pageTitle}
      titleDefault={DEFAULT_TITLE}
      titleTemplate={titleTemplate}
      description={description}
      canonical={Astro.url.toString()}
      noindex={!allowIndexing}
      nofollow={!allowIndexing}
      openGraph={{
        basic: {
          title: title || "Astro Starter",
          type: "website",
          image: `${siteUrl}/og.png`,
          url: Astro.url.toString(),
        },
        image: {
          alt: "Astro Starter",
          width: 1600,
          height: 800,
          type: "image/png",
        },
        optional: {
          description,
          siteName: "Astro Starter",
          locale: "en_US",
        },
      }}
      twitter={{
        card: "summary_large_image",
        site: "@alipiry",
        creator: "@alipiry",
        title: title || "Astro Starter",
        description,
        image: `${siteUrl}/og.png`,
        imageAlt: "Astro Starter",
      }}
      extend={{
        meta: [
          { name: "author", content: "Ali Piry" },
          {
            name: "keywords",
            content:
              "astro, web development, javascript, typescript, modern web",
          },
          { name: "googlebot", content: robotsContent },
          { name: "theme-color", content: "#000000" },
          { name: "msapplication-TileColor", content: "#000000" },
        ],
        link: [
          {
            rel: "apple-touch-icon",
            sizes: "180x180",
            href: "/apple-touch-icon.png",
          },
          {
            rel: "icon",
            type: "image/png",
            sizes: "32x32",
            href: "/favicon-32x32.png",
          },
          {
            rel: "icon",
            type: "image/png",
            sizes: "16x16",
            href: "/favicon-16x16.png",
          },
          {
            rel: "icon",
            type: "image/x-icon",
            href: "/favicon.ico",
          },
          {
            rel: "icon",
            type: "image/png",
            sizes: "192x192",
            href: "/android-chrome-192x192.png",
          },
          {
            rel: "icon",
            type: "image/png",
            sizes: "512x512",
            href: "/android-chrome-512x512.png",
          },
        ],
      }}
    />
    <link rel="icon" type="image/svg+xml" href="/favicon.svg" />
    <link rel="sitemap" href="/sitemap-index.xml" />
  </head>
  <body>
    <slot />
  </body>
</html>

<style>
  html,
  body {
    margin: 0;
    width: 100%;
    height: 100%;
  }
</style>
